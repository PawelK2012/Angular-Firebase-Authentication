<div class="user container">
    <div class="row">
        <div class="col-xs-12 padding-bottom-20 text-center">
            <h1>Hello {{vm.currentUser.firstname}}!</h1>
            <p>User from: <strong>{{vm.currentUser.date | date:'MM/dd/yyyy'}}</strong></p>
            <p>Email: <strong>{{currentUser.email}}</strong></p>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12 padding-bottom-20 text-center">
            <ul class="list-inline">
                <li data-ng-click="vm.upEmail = true">Update email</li>
            </ul>
        </div>
    </div>
    <div class="row">
        <div class="col-md-5 col-md-offset-3">
            <p class="bg-success" data-ng-if="successMsg">{{successMsg}}</p>
            <p class="bg-danger" data-ng-if="errorMsg">{{errorMsg}}</p>
        </div>
    </div>
    <div class="row update-email" data-ng-if="vm.upEmail">
        <div class="col-md-5 col-md-offset-3 padding-bottom-20">
            <h4>Update email</h4>
            <hr>
            <form name="changeEmailForm" class="form-horizontal" ng-submit="vm.updateEmail(vm.emailOld,vm.emailNew, vm.pass)" novalidate>
                <div class="form-group">
                    <label class="col-sm-2 control-label">Old email</label>
                    <div class="col-sm-10">
                        <input type="email" name="emailOld" class="form-control" placeholder="Email" data-ng-model="vm.emailOld" required>
                        <span class="bg-danger margin-top-10 pull-left" ng-show="changeEmailForm.emailOld.$touched && changeEmailForm.emailOld.$invalid">The email is required.</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">New email</label>
                    <div class="col-sm-10">
                        <input type="email" name="emailNew" class="form-control" placeholder="Email" data-ng-model="vm.emailNew" required>
                        <span class="bg-danger margin-top-10 pull-left" ng-show="changeEmailForm.emailNew.$touched && changeEmailForm.emailNew.$invalid">The email is required.</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">Password</label>
                    <div class="col-sm-10">
                        <input type="password" name="pass" class="form-control" placeholder="Password" data-ng-model="vm.pass" required>
                        <span class="bg-danger margin-top-10 pull-left" ng-show="changeEmailForm.pass.$touched && changeEmailForm.pass.$invalid">The password is required.</span>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                        <button type="submit" class="btn btn-default pull-right" ng-disabled="changeEmailForm.$invalid">Change email</button>
                        <p data-ng-click="vm.upEmail = false">Cancel</p>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
